<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Base64 Decode/ Encode</title>
  <script src="https://cdn.jsdelivr.net/clipboard.js/1.5.12/clipboard.min.js"></script>
</head>
<body>
  <div id="content">
    <h3>The encoded/ decoded result will be copied automatically!</h3>
    <div>
      <label for="input">Input:</label>
      <textarea id="input" rows="10" cols="80" placeholder="Input here" autofocus></textarea>
    </div>
    <div style="margin: 10px;">
      <button id="btn-encode" type="button">Encode</button>
      <button id="btn-decode" type="button">Decode</button>
      <button id="btn-copy" type="button" data-clipboard-target="#output">Copy Result</button>
    </div>
    <div>
      <label for="output">Output:</label>
      <textarea id="output" rows="10" cols="80" placeholder="Click the Encode/ Decode button to see the result here"></textarea>
    </div>
  </div>
  <script>
    var clipboard = new Clipboard('#btn-copy')
    
    document.getElementById('btn-encode').addEventListener('click', function() {
      var input = document.getElementById('input').value
      if (input) {
	var output = encode(input)
	document.getElementById('output').value = output
	document.getElementById('btn-copy').click()
      }
    })

    document.getElementById('btn-decode').addEventListener('click', function() {
      var input = document.getElementById('input').value
      if (input) {
	var output = decode(input)
	document.getElementById('output').value = output
      }
    })

    function encode(msg) {
      var ret = ''
	try {
	  ret = btoa(unescape(encodeURIComponent(msg)))
	} catch (err) {
	  alert(err)
	}
	
	return ret
    }
		
    function decode(msg) {
      var ret = ''
      try {
	ret = decodeURIComponent(escape(atob(msg)))
      } catch (err) {
	alert(err)
      }
			
      return ret
    }
  </script>
</body>
</html>
